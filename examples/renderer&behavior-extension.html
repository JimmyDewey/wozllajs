<!DOCTYPE html>
<html>
<head>
    <title>WozllaJS-example: renderer-behavior-extension</title>

</head>
<body>
<canvas id="display"></canvas>



<script src="../js/WozllaJS.js"></script>
<script src="../js/Engine.js"></script>
<script src="../js/Time.js"></script>

<script src="../js/geom/Matrix2D.js"></script>

<script src="../js/core/GameObject.js"></script>
<script src="../js/core/Component.js"></script>
<script src="../js/core/Scene.js"></script>
<script src="../js/core/Camera.js"></script>
<script src="../js/core/Transform.js"></script>
<script src="../js/core/Behavior.js"></script>
<script src="../js/core/Renderer.js"></script>
<script src="../js/core/Collider.js"></script>

<script>
    // define a renderer
    W.define('RectRenderer', function($) {

        function RectRenderer() {
            $.Renderer.call(this);
            this.color = 'red';
            this.width = 100;
            this.height = 100;
        }

        RectRenderer.prototype = $.extend($.Renderer, {
            render : function(context) {
                var t = this.gameObject.transform;
                context.fillStyle = this.color;
                context.fillRect(t.x, t.y, this.width, this.height);
            }
        });

        return RectRenderer;
    });

    // define a behavior
    W.define('Movement', function($) {

        function Movement() {
            $.Behavior.call(this);
        }

        Movement.prototype = $.extend($.Behavior, {
            update : function() {
                var t = this.gameObject.transform;
                if(t.x > 960) {
                    t.x = 0;
                }
                if(t.y > 640) {
                    t.y = 0;
                }
                this.gameObject.transform.translate(1, 1);
            }
        });

        return Movement;
    });



</script>
<script>
    W.Engine.init(960, 640, document.getElementById('display'));
    W.Engine.startMainLoop();

    var camera = new W.Camera(W.Engine.getDisplayCanvas());
    var scene = new W.Scene();
    var root = new W.GameObject();
    root.addComponent('RectRenderer');
    root.addComponent('Movement');
    scene.setRoot(root);
    scene.setCamera(camera);

    W.Engine.addMainLoopListener(function() {
       scene.mainLoop();
    });
</script>


</body>
</html>