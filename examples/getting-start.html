<!DOCTYPE html>
<html>
<head>
    <title>getting start | wozllajs</title>
    <script src="../libs/Class_v0.2.js"></script>
    <script src="../libs/preloadjs-0.3.1.min.js"></script>
    <script src="../libs/Matrix2D.js"></script>
    <script src="../src/predefine.js"></script>
    <script src="../src/wozllajs/wozllajs.js"></script>
    <script src="../src/wozllajs/util/Array2D.js"></script>
    <script src="../src/wozllajs/util/EventDispatcher.js"></script>
    <script src="../src/wozllajs/Time.js"></script>
    <script src="../src/wozllajs/Engine.js"></script>
    <script src="../src/wozllajs/ResourceManager.js"></script>
    <script src="../src/wozllajs/Display.js"></script>
    <script src="../src/wozllajs/Transform.js"></script>
    <script src="../src/wozllajs/AbstractGameObject.js"></script>
    <script src="../src/wozllajs/GameObject.js"></script>
    <script src="../src/wozllajs/Camera.js"></script>
    <script src="../src/wozllajs/Scene.js"></script>
    <script src="../src/wozllajs/Component.js"></script>
    <script src="../src/wozllajs/component/renderer/ImageRenderer.js"></script>
</head>
<body>
<div id="root" style="width: 961px; margin: 0 auto; border: 1px solid #555; height: 640px;"></div>
<script>
    var engine,
        display,
        camera,
        scene,
        gameObject;

    // init engine
    engine = wozllajs.initEngine(document.getElementById('root'));

    // create a display, display creates a canvas
    display = wozllajs.createDisplay('main', 960, 640, 0);

    // create a scene object, it's a tree structure.
    scene = wozllajs.createScene('test');

    // create a game object with reg position
    gameObject = wozllajs.createGameObject({
        id : 'test',
        regX : 101/2,
        regY : 59/2
    });

    // define an animation component
    wozllajs.defineComponent('x.Animation', {
        alias : 'xAnimation',
        extend : 'wozlla.Component',
        update : function(time, camera) {
            var obj = this.gameObject;
            obj.x += 1;
            obj.y += 1;
            obj.rotation += time.delta / 20;
            if(obj.x > 960) {
                obj.x = 0;
            }
            if(obj.y > 640) {
                obj.y = 0;
            }
        }
    });

    // add components to the gameObject
    gameObject.addComponent(wozllajs.createComponent('renderer.image', {
        src : 'images/logo.png'
    }));
    gameObject.addComponent(wozllajs.createComponent('xAnimation'));

    // put it to scene
    scene.addObject(gameObject);

    // load resource and init
    scene.loadResources({
        onComplete : function() {
            scene.init();
            display.setScene(scene);

            // start animationFrame main loop
            engine.start();
        }
    });



</script>
</body>
</html>