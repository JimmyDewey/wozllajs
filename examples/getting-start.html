<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="../libs/Class_v0.2.js"></script>
    <script src="../libs/preloadjs-0.3.1.min.js"></script>
    <script src="../libs/Matrix2D.js"></script>
    <script src="../src/predefine.js"></script>
    <script src="../src/wozllajs/wozllajs.js"></script>
    <script src="../src/wozllajs/util/Array2D.js"></script>
    <script src="../src/wozllajs/util/EventDispatcher.js"></script>
    <script src="../src/wozllajs/Engine.js"></script>
    <script src="../src/wozllajs/ResourceManager.js"></script>
    <script src="../src/wozllajs/Display.js"></script>
    <script src="../src/wozllajs/Transform.js"></script>
    <script src="../src/wozllajs/AbstractGameObject.js"></script>
    <script src="../src/wozllajs/GameObject.js"></script>
    <script src="../src/wozllajs/Camera.js"></script>
    <script src="../src/wozllajs/Scene.js"></script>
    <script src="../src/wozllajs/Component.js"></script>
    <script src="../src/wozllajs/component/renderer/ImageRenderer.js"></script>
</head>
<body>
<div id="root" style="width: 961px; margin: 0 auto; border: 1px solid #555; height: 640px;"></div>
<script>
    var engine,
        display,
        camera,
        scene,
        gameObject;

    // init engine
    engine = wozllajs.initEngine(document.getElementById('root'));

    // create a display, display creates a canvas
    display = wozllajs.createDisplay('main', 960, 640, 0);

    // create a scene object, it's a tree structure.
    scene = Class.create('wozlla.Scene');

    // create a game object with reg position
    gameObject = Class.create('wozlla.GameObject', {
        id : 'test',
        regX : 101/2,
        regY : 59/2
    });

    // define an animation component
    Class.define('x.Animation', {
        extend : 'wozlla.Component',
        update : function() {
            var x = this.gameObject.x += 1;
            var y = this.gameObject.y += 1;
            this.gameObject.rotation += 1;
            if(x > 960) {
                this.gameObject.x = 0;
            }
            if(y > 640) {
                this.gameObject.y = 0;
            }
        }
    });

    // add components to the gameObject
    gameObject.addComponent(Class.create('wozlla.component.renderer.ImageRenderer', {
        src : 'logo.png'
    }));
    gameObject.addComponent(Class.create('x.Animation'));

    // put it to scene
    scene.addObject(gameObject);

    // load resource and init
    scene.loadResources({
        onComplete : function() {
            scene.init();
            display.setScene(scene);

            // start animationFrame main loop
            engine.start();
        }
    });



</script>
</body>
</html>